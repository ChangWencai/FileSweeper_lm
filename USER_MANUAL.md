# FileSweeper 用户手册

## 目录
1. [简介](#简介)
2. [系统要求](#系统要求)
3. [安装指南](#安装指南)
4. [快速开始](#快速开始)
5. [界面介绍](#界面介绍)
6. [功能详解](#功能详解)
7. [设置说明](#设置说明)
8. [高级功能](#高级功能)
9. [故障排除](#故障排除)
10. [技术支持](#技术支持)

## 简介

FileSweeper 是一款跨平台的桌面应用程序，可帮助您识别和管理计算机上的重复文件。它能够扫描指定目录，基于文件内容（而非仅文件名）查找重复文件，并允许您选择性地删除重复项，从而释放宝贵的存储空间。

## 系统要求

### 最低配置
- **操作系统**：
  - Windows 10 或更高版本
  - macOS 10.13 或更高版本
  - 大多数现代 Linux 发行版
- **内存**：4GB RAM
- **存储空间**：至少 100MB 可用空间用于安装程序

### 推荐配置
- **操作系统**：最新版本的 Windows、macOS 或 Linux
- **内存**：8GB RAM 或更多
- **存储空间**：足够的空间用于处理大型文件

## 安装指南

### 方法一：从源代码运行（推荐给开发者）

1. 确保您的系统已安装 Python 3.8 或更高版本
2. 克隆或下载 FileSweeper 仓库
3. 打开终端或命令提示符，导航到 FileSweeper 目录
4. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```
5. 运行应用程序：
   ```bash
   python main.py
   ```

### 方法二：使用预编译的可执行文件

1. 从项目的发布页面下载适用于您操作系统的可执行文件
2. Windows 用户下载 `.exe` 文件
3. macOS 用户下载 `.app` 文件
4. Linux 用户下载可执行文件
5. 双击文件运行程序

## 快速开始

1. **启动 FileSweeper**
   - 双击桌面图标或从开始菜单启动程序

2. **选择扫描目录**
   - 点击工具栏上的"选择扫描目录"按钮或使用菜单"文件"->"选择扫描目录"
   - 在弹出的对话框中选择您想要扫描的文件夹

3. **开始扫描**
   - 点击工具栏上的"开始扫描"按钮或使用菜单"扫描"->"开始扫描"
   - 等待扫描完成，进度会显示在状态栏中

4. **查看结果**
   - 扫描完成后，重复文件会显示在中央的表格中
   - 文件按组显示，每组包含内容相同的文件

5. **选择要删除的文件**
   - 在表格中勾选您想要删除的文件
   - 默认情况下，每组中的第一个文件不会被选中

6. **删除文件**
   - 点击工具栏上的"删除选中文件"按钮
   - 在弹出的确认对话框中点击"是"以确认删除操作

## 界面介绍

### 主界面元素

1. **菜单栏**
   - 文件：包含选择目录、退出等操作
   - 扫描：包含开始扫描、停止扫描等操作
   - 选择：包含全选、全不选、反选等操作
   - 工具：包含设置等操作
   - 帮助：包含关于等信息

2. **工具栏**
   - 选择扫描目录：选择要扫描的文件夹
   - 开始扫描：开始扫描过程
   - 停止扫描：停止当前扫描过程
   - 查看模式：切换文件显示模式（详细信息、列表、网格）
   - 全选/全不选/反选：快速选择文件
   - 自动选择：根据设置的策略自动选择文件
   - 删除选中文件：删除选中的文件

3. **左侧面板 - 目录树**
   - 显示当前选择的扫描目录结构

4. **中央面板 - 重复文件列表**
   - 显示扫描到的重复文件，按组组织
   - 每组文件具有相同的内容
   - 包含文件路径、大小、修改时间等信息

5. **右侧面板 - 文件预览**
   - 预览选中文件的内容
   - 支持图片和文本文件的预览
   - 显示文件详细信息

6. **底部状态栏**
   - 显示当前操作状态
   - 显示选中文件数量
   - 显示扫描进度

## 功能详解

### 文件扫描

1. **选择扫描目录**
   - 点击"选择扫描目录"按钮或使用菜单"文件"->"选择扫描目录"
   - 浏览并选择要扫描的文件夹

2. **开始扫描**
   - 点击"开始扫描"按钮开始扫描过程
   - 扫描过程中可以点击"停止扫描"按钮中止扫描

3. **扫描进度**
   - 状态栏会显示当前扫描的目录
   - 进度条显示整体扫描进度

### 文件管理

1. **查看重复文件**
   - 重复文件按组显示，每组文件具有相同的内容
   - 可以展开/折叠组来查看文件详情

2. **选择文件**
   - 点击文件行前的复选框来选择/取消选择文件
   - 使用工具栏的全选、全不选、反选按钮进行批量操作

3. **预览文件**
   - 单击文件行选中文件
   - 右侧预览面板会显示文件内容预览（支持图片和文本文件）
   - 预览面板同时显示文件的详细信息

4. **打开文件**
   - 双击文件行或右键选择"打开文件"在默认应用程序中打开文件
   - 右键选择"在文件夹中显示"在文件管理器中定位文件

5. **删除文件**
   - 选择要删除的文件
   - 点击"删除选中文件"按钮
   - 在确认对话框中确认删除操作
   - 文件默认会被移至回收站，而非永久删除

### 查看模式

FileSweeper 提供三种不同的查看模式：

1. **详细信息模式**（默认）
   - 显示文件的所有信息（选择、路径、大小、修改时间）
   - 包含网格线和交替行颜色

2. **列表模式**
   - 简洁的列表视图
   - 无网格线但保留交替行颜色

3. **网格模式**
   - 紧凑的网格视图
   - 无网格线和交替行颜色

### 排序和筛选

1. **排序**
   - 点击列标题可按该列排序
   - 再次点击同一列标题可切换排序顺序（升序/降序）

2. **筛选**
   - 使用筛选工具栏按文件名筛选
   - 设置最小和最大文件大小进行筛选
   - 点击"清除筛选"按钮清除所有筛选条件

### 右键菜单

在文件列表中右键点击可打开上下文菜单，提供以下操作：

1. **文件操作**
   - 打开文件：在默认应用程序中打开文件
   - 在文件夹中显示：在文件管理器中定位文件

2. **选择操作**
   - 全选：选择所有文件
   - 全不选：取消选择所有文件
   - 反选：反向选择文件

3. **删除操作**
   - 删除选中文件：删除当前选中的文件

## 设置说明

通过"工具"->"设置"菜单可以打开设置对话框，配置 FileSweeper 的行为。

### 重复文件处理

1. **默认选中重复文件**
   - 启用后，在扫描完成后自动选中除每组第一个文件外的所有重复文件

2. **高级自动选择策略**
   - 保留每组第一个文件：默认策略
   - 保留每组最新修改的文件：根据文件修改时间选择
   - 保留特定文件夹中的文件：保留指定文件夹中的文件

### 大文件优化

1. **启用快速扫描模式**
   - 只计算文件前部分数据的哈希值，提高大文件扫描速度
   - 可选择快速扫描大小（4MB、8MB、16MB、32MB）

2. **使用多进程加速**
   - 使用多进程并行计算哈希值，适合 SSD 和多核 CPU

3. **使用内存映射读取**
   - 对大文件使用内存映射读取，减少数据拷贝

4. **缓存文件哈希值**
   - 缓存已计算的文件哈希值，提高重复扫描速度

### 文件删除

1. **使用回收站删除文件**
   - 启用后删除文件时会放入回收站，而不是永久删除

### 扫描过滤设置

1. **最小文件大小**
   - 设置扫描的最小文件大小，小于该大小的文件将被忽略

2. **最大文件大小**
   - 设置扫描的最大文件大小，大于该大小的文件将被忽略

3. **文件类型**
   - 选择要扫描的文件类型（所有文件、图片、文档、音频、视频、自定义）

4. **自定义扩展名**
   - 当选择"自定义"文件类型时，可指定要扫描的文件扩展名

## 高级功能

### 自动选择功能

FileSweeper 提供智能的自动选择功能，可根据设置的策略自动选择要删除的文件：

1. 点击工具栏上的"自动选择"按钮
2. 程序会根据设置的策略自动选择文件
3. 可随时更改策略并重新应用

### 文件预览

FileSweeper 支持多种文件类型的预览：

1. **图片文件**：支持 PNG、JPG、JPEG、GIF、BMP、ICO、WebP 等格式
2. **文本文件**：支持 TXT、MD、LOG、PY、JS、HTML、CSS、JSON、XML、CSV、YAML 等格式
3. **其他文件**：显示文件类型和基本信息

### 性能优化

FileSweeper 包含多种性能优化技术：

1. **智能哈希计算**：
   - 小文件：一次性读取
   - 中等文件：分块读取
   - 大文件：内存映射

2. **并行处理**：
   - 根据文件数量和系统资源自动选择最优处理方式
   - 支持多线程和多进程处理

3. **智能缓存**：
   - 缓存文件哈希值避免重复计算
   - 自动管理缓存大小和有效期

## 故障排除

### 常见问题

1. **程序无法启动**
   - 确保已正确安装所有依赖包
   - 检查 Python 版本是否为 3.8 或更高

2. **扫描速度慢**
   - 启用"大文件优化"中的相关选项
   - 确保有足够的系统资源（CPU、内存）

3. **无法访问某些文件夹**
   - macOS 用户：检查是否已授予完全磁盘访问权限
   - Windows 用户：尝试以管理员身份运行程序

4. **文件预览无法显示**
   - 确保文件未被其他程序占用
   - 检查文件是否损坏

### 权限问题

1. **macOS 权限问题**
   - 如果无法扫描某些受保护的目录（如 Desktop、Documents），需要在系统偏好设置中授予权限
   - 打开"系统偏好设置" -> "安全性与隐私" -> "隐私" -> "完全磁盘访问权限"
   - 添加 FileSweeper 到允许列表

2. **Windows 权限问题**
   - 如果需要扫描系统目录，可能需要以管理员身份运行程序
   - 右键点击程序图标，选择"以管理员身份运行"

### 性能问题

1. **内存占用过高**
   - 减少同时处理的文件数量
   - 关闭不必要的应用程序以释放系统资源

2. **CPU 使用率过高**
   - 在设置中关闭"使用多进程加速"选项
   - 降低最大工作线程数

## 技术支持

如果您在使用 FileSweeper 过程中遇到任何问题，可以通过以下方式获取技术支持：

1. **查看文档**：仔细阅读本用户手册和 README.md 文件
2. **提交问题**：在项目的 GitHub 页面提交 Issue
3. **社区支持**：加入相关的技术社区寻求帮助

### 系统要求详情

FileSweeper 基于以下技术构建：

- **Python**：3.8 或更高版本
- **PySide6**：Qt for Python 框架
- **send2trash**：安全文件删除库
- **psutil**：系统和进程实用程序库

### 文件结构

安装后的 FileSweeper 包含以下主要组件：

- `main.py`：主程序入口
- `core/`：核心功能模块
- `ui/`：用户界面模块
- `icons/`：应用程序图标
- `requirements.txt`：依赖包列表

### 数据存储

FileSweeper 在以下位置存储用户数据：

1. **配置文件**：`~/.filesweeper_config.json`
   - 存储用户设置和偏好
   - 包括扫描设置、自动选择策略等

2. **哈希缓存**：`系统临时目录/filesweeper_hash_cache.json`
   - 存储文件哈希值缓存
   - 提高重复扫描的性能

## 版本信息

当前版本：1.0.0

### 更新历史

- **v1.0.0**：初始版本
  - 基本文件扫描和重复检测功能
  - 图形用户界面
  - 文件管理和删除功能
  - 设置和配置功能
  - 性能优化和跨平台支持

## 许可证

FileSweeper 基于 MIT 许可证发布，详见 LICENSE 文件。

## 致谢

FileSweeper 使用了以下开源技术：

- [PySide6](https://www.qt.io/qt-for-python)：跨平台 GUI 框架
- [send2trash](https://github.com/arsenetar/send2trash)：安全文件删除库
- [psutil](https://github.com/giampaolo/psutil)：系统监控库

感谢所有开源社区的贡献者们！